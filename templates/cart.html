{% extends 'base.html' %}
{% block content %}
<div class="container mt-1">
  <h2>Your Cart</h2>
  {% if items %}
    <form method="post" action="{% url 'update_cart' %}">
      {% csrf_token %}
      <table class="cart-table">
        <thead>
          <tr>
            <th>Book</th><th>Price</th><th>Qty</th><th>Line Total</th><th>Remove</th>
          </tr>
        </thead>
        <tbody>
          {% for item in items %}
          <tr>
            <td>{{ item.book.title }}</td>
            <td>${{ item.book.price }}</td>
            <td>
              <input type="number" name="qty_{{ item.book.id }}" value="{{ item.quantity }}" min="1">
            </td>
            <td>${{ item.line_total }}</td>
            <td>
              <a href="{% url 'remove_from_cart' item.book.slug %}" class="btn-sm">Ã—</a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      <button type="submit" class="btn">Update Cart</button>
    </form>
    <div class="cart-summary">
      <p><strong>Total:</strong> ${{ total }}</p>
      <a href="{% url 'checkout' %}" class="btn">Proceed to Checkout</a>
    </div>
  {% else %}
    <p>Your cart is empty.</p>
  {% endif %}
</div>
{% endblock %}
